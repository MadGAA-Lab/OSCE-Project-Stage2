version: '3.8'

services:
  medical-judge:
    image: ghcr.io/${GITHUB_REPOSITORY:-madgaa-lab/osce-project}-medical-judge:latest
    container_name: medical-judge
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - API_KEY=${API_KEY}
      - BASE_URL=${BASE_URL}
      - DEFAULT_MODEL=${DEFAULT_MODEL}
      - AZURE_OPENAI_API_VERSION=${AZURE_OPENAI_API_VERSION:-}
      - PATIENT_API_KEY=${PATIENT_API_KEY:-}
      - PATIENT_BASE_URL=${PATIENT_BASE_URL:-}
      - PATIENT_MODEL=${PATIENT_MODEL:-}
      - PATIENT_AZURE_API_VERSION=${PATIENT_AZURE_API_VERSION:-}
      - JUDGE_API_KEY=${JUDGE_API_KEY:-}
      - JUDGE_BASE_URL=${JUDGE_BASE_URL:-}
      - JUDGE_MODEL=${JUDGE_MODEL:-}
      - JUDGE_AZURE_API_VERSION=${JUDGE_AZURE_API_VERSION:-}
    ports:
      - "9009:9009"
    # volumes:
    #   - ./data:/app/data
    #   - ./logs:/app/logs

  doctor-agent:
    image: ghcr.io/${GITHUB_REPOSITORY:-madgaa-lab/osce-project}-doctor-agent:latest
    container_name: doctor-agent
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - API_KEY=${API_KEY}
      - BASE_URL=${BASE_URL}
      - DEFAULT_MODEL=${DEFAULT_MODEL}
      - AZURE_OPENAI_API_VERSION=${AZURE_OPENAI_API_VERSION:-}
      - DOCTOR_API_KEY=${DOCTOR_API_KEY:-}
      - DOCTOR_BASE_URL=${DOCTOR_BASE_URL:-}
      - DOCTOR_MODEL=${DOCTOR_MODEL:-}
      - DOCTOR_AZURE_API_VERSION=${DOCTOR_AZURE_API_VERSION:-}
    ports:
      - "9019:9019"
    # volumes:
    #   - ./data:/app/data
    #   - ./logs:/app/logs

# Add more services as needed
